<!DOCTYPE html>
<html>
<head>
    <title>Carrito de Compras</title>
</head>
<body>
    <h1>Carrito de Compras</h1>

    <!-- Lista de productos en el carrito -->
    <div id="productList">
        <!-- Producto 1 -->
        <div>
            <h2>Producto 1</h2>
            <p>Precio: $100.00</p>
            <p>SKU: SKU1</p>
            <p>Categoría: 1</p>
            <p>Marca: 1</p>
        </div>

        <!-- Producto 2 -->
        <div>
            <h2>Producto 2</h2>
            <p>Precio: $200.00</p>
            <p>SKU: SKU2</p>
            <p>Categoría: 2</p>
            <p>Marca: 2</p>
        </div>
    </div>

    <div>
        <label for="couponCode">Código de Cupón:</label>
        <input type="text" id="couponCode" name="couponCode">
        <button id="applyCoupon">Aplicar Cupón</button>
    </div>

    <script>
        document.getElementById('applyCoupon').addEventListener('click', function() {
            const couponCode = document.getElementById('couponCode').value;

            // Aquí iría el código para hacer la petición al servidor y aplicar el cupón
            // Por ejemplo, usando fetch:
            fetch('/coupons/apply-coupon', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    userId: 'idDelUsuario', // Reemplaza esto con el ID del usuario actual
                    couponCode: couponCode,
                    products: [
                        {
                            idProduct: 1,
                            nameProduct: 'Producto 1',
                            priceProduct: 100.00,
                            SKU: 'SKU1',
                            idCategory: 1,
                            idBrand: 1
                        },
                        {
                            idProduct: 2,
                            nameProduct: 'Producto 2',
                            priceProduct: 200.00,
                            SKU: 'SKU2',
                            idCategory: 2,
                            idBrand: 2
                        }
                    ],
                }),
            })
            .then(response => response.json())
            .then(data => {
                // Aquí iría el código para actualizar la página con el nuevo total
                console.log('Descuento:', data.discountAmount);
                console.log('Total con descuento:', data.totalWithDiscount);
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        });
    </script>
</body>
</html>